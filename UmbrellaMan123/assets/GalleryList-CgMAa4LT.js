import{_ as x,s as B,p as L,l as V,m as E,e as _,f as k,r as l,o as w,c as I,w as m,b as i,j as N,a as s,t as b,q as X,h as $,F as R,u as S,d as U}from"./index-C5gi6ePC.js";import"./dom-to-image-TXy_c0g6.js";import{s as M}from"./services-B4Yo7-e5.js";const j=async(g,t="image.png")=>{try{const e=document.createElement("a");e.href=g,e.download=t,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(e){console.error("下載過程中發生錯誤：",e)}},F={class:"mb-4"},P={class:"gallary-info-paragraph text-white"},q={class:"mb-2"},A={class:"work-number"},D={__name:"GalleryInfoModal",props:{showModal:Boolean,uuid:String},emits:["update:showModal","confirm"],setup(g,{emit:t}){B(),L();const e=V(),v=E(()=>e.state.isLoading),n=g,p=t,d=_(!1);k(()=>n.showModal,r=>{d.value=r}),k(d,r=>{p("update:showModal",r),r?f():o.value={}});const o=_({}),a=_(""),f=async()=>{console.log("props.uuid:",n.uuid),[a.value,o.value]=await M.getGalleryInfo(n.uuid),console.log(o.value)};return(r,u)=>{const y=l("XLoadingCircle"),c=l("v-img"),h=l("v-card"),C=l("v-dialog");return w(),I(C,{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=G=>d.value=G),class:"w-100 w-md-75","max-width":"800",opacity:.85},{default:m(()=>[i(h,{class:"pa-4 rounded-lg",color:"transparent",elevation:"0"},{default:m(()=>[v.value?(w(),I(y,{key:0})):N("",!0),s("div",F,[i(c,{src:o.value.src,class:"photo-shadow"},null,8,["src"])]),s("div",P,[u[1]||(u[1]=s("div",{class:"work-description-title"},[s("h6",null,"作品敘述"),s("div",{class:"line"})],-1)),s("h4",q,b(o.value.description),1),s("div",A,"作品編號：#"+b(o.value.number),1)])]),_:1})]),_:1},8,["modelValue"])}}},T=x(D,[["__scopeId","data-v-63b15376"]]),z={class:"mt-2 d-flex justify-center"},H=10,Q={__name:"GalleryList",setup(g){L();const t=_({current_page:0,last_page:1/0}),e=_([]),v=async({done:o})=>{try{let a;[a,t.value]=await M.getGalleryList(t.value.current_page+1,H),e.value.push(...a),console.log("galleryList:",e.value),console.log("pagination:",t.value),t.value.current_page<t.value.last_page?o("ok"):o("empty")}catch{o("empty")}},n=_(""),p=X({galleryInfo:!1}),d={galleryInfo:o=>{n.value=o,p.galleryInfo=!0,console.log(n.value)}};return(o,a)=>{const f=l("v-img"),r=l("v-btn"),u=l("XBaseGridLayout"),y=l("v-infinite-scroll");return w(),$(R,null,[i(y,{onLoad:v,color:"orange"},{default:m(()=>[i(u,{cards:e.value},{card:m(({item:c})=>[i(f,{onClick:h=>d.galleryInfo(c.uuid),src:c.images[0].framed_image_path,placeholder:"載入中"},null,8,["onClick","src"]),s("div",z,[i(r,{class:"btn-blue",rounded:"",onClick:h=>S(j)(c.images[0].framed_image_path)},{default:m(()=>a[1]||(a[1]=[U("下載收藏此作品")])),_:2},1032,["onClick"])])]),_:1},8,["cards"])]),_:1}),i(T,{showModal:p.galleryInfo,"onUpdate:showModal":a[0]||(a[0]=c=>p.galleryInfo=c),uuid:n.value},null,8,["showModal","uuid"])],64)}}};export{Q as default};
