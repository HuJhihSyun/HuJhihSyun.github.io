import{_ as M,s as V,p as b,l as E,m as N,e as d,f as I,r as n,o as w,c as k,w as g,b as i,j as R,a as l,t as L,q as X,h as $,F as S,u as U,d as j}from"./index-DtplGShS.js";import"./dom-to-image-TXy_c0g6.js";import{s as C}from"./services-Bg9yMRnX.js";const F=async(v,s="image.png")=>{try{const e=document.createElement("a");e.href=v,e.download=s,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(e){console.error("下載過程中發生錯誤：",e)}},P={class:"mb-4"},q={class:"gallary-info-paragraph text-white"},A={class:"mb-2"},D={class:"work-number"},T={__name:"GalleryInfoModal",props:{showModal:Boolean,uuid:String},emits:["update:showModal","confirm"],setup(v,{emit:s}){V(),b();const e=E(),f=N(()=>e.state.isLoading),r=v,p=s,u=d(!1);I(()=>r.showModal,a=>{u.value=a}),I(u,a=>{p("update:showModal",a),a?y():o.value={}});const o=d({}),t=d(""),m=d(1),y=async()=>{console.log("props.uuid:",r.uuid),[t.value,o.value]=await C.getGalleryInfo(r.uuid),console.log(o.value);const a=new Image;a.src=o.value.src,a.onload=()=>{m.value=a.width/a.height}};return(a,_)=>{const c=n("XLoadingCircle"),h=n("v-img"),G=n("v-card"),x=n("v-dialog");return w(),k(x,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=B=>u.value=B),class:"w-100 w-md-75","max-width":m.value===1?"750":m.value<1?"600":"1000",opacity:.85},{default:g(()=>[i(G,{class:"pa-4 rounded-lg",color:"transparent",elevation:"0"},{default:g(()=>[f.value?(w(),k(c,{key:0})):R("",!0),l("div",P,[i(h,{src:o.value.src,class:"photo-shadow"},null,8,["src"])]),l("div",q,[_[1]||(_[1]=l("div",{class:"work-description-title"},[l("h6",null,"作品敘述"),l("div",{class:"line"})],-1)),l("h3",A,L(o.value.description),1),l("div",D," 作品編號：#"+L(o.value.number),1)])]),_:1})]),_:1},8,["modelValue","max-width"])}}},z=M(T,[["__scopeId","data-v-daa1f75b"]]),H={class:"mt-2 d-flex justify-center"},J=10,K={__name:"GalleryList",setup(v){b();const s=d({current_page:0,last_page:1/0}),e=d([]),f=async({done:o})=>{try{let t;[t,s.value]=await C.getGalleryList(s.value.current_page+1,J),e.value.push(...t),console.log("galleryList:",e.value),console.log("pagination:",s.value),s.value.current_page<s.value.last_page?o("ok"):o("empty")}catch{o("empty")}},r=d(""),p=X({galleryInfo:!1}),u={galleryInfo:o=>{r.value=o,p.galleryInfo=!0,console.log(r.value)}};return(o,t)=>{const m=n("v-img"),y=n("v-btn"),a=n("XBaseGridLayout"),_=n("v-infinite-scroll");return w(),$(S,null,[i(_,{onLoad:f,color:"orange"},{default:g(()=>[i(a,{cards:e.value},{card:g(({item:c})=>[i(m,{class:"cursor-pointer",onClick:h=>u.galleryInfo(c.uuid),src:c.images[0].framed_image_path,placeholder:"載入中"},null,8,["onClick","src"]),l("div",H,[i(y,{class:"btn-download",rounded:"",onClick:h=>U(F)(c.images[0].framed_image_path)},{default:g(()=>t[1]||(t[1]=[j("下載收藏此拍立得")])),_:2},1032,["onClick"])])]),_:1},8,["cards"])]),_:1}),i(z,{showModal:p.galleryInfo,"onUpdate:showModal":t[0]||(t[0]=c=>p.galleryInfo=c),uuid:r.value},null,8,["showModal","uuid"])],64)}}},Y=M(K,[["__scopeId","data-v-21ea705a"]]);export{Y as default};
